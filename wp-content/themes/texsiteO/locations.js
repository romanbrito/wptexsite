function GoogleMap(){return{getGoogleMaps:function(e){var t=new google.maps.Map(document.getElementById("map")),o=new google.maps.LatLngBounds;return e.locations.map(function(e,a){var n=new google.maps.LatLng(e.coordinates);o.extend(n),t.fitBounds(o),t.panToBounds(o)}),{map:t}},addMarkers:function(e,t){var o=t.locations.map(function(t,o){return new google.maps.Marker({position:t.coordinates,label:t.label,map:e})}),a=(t.locations.map(function(e,t){return o[t].addListener("click",function(){window.open("https://www.google.com/maps/dir/?api=1&destination="+e.coordinates.lat+","+e.coordinates.lng,"_blank")})}),document.createElement("script"));a.onload=function(){new MarkerClusterer(e,o,{gridSize:15,imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})},a.src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js",document.head.appendChild(a)},getDistance:function(e,t,o){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:t,travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){"OK"===t?o(e.rows[0].elements):alert("Geocode was not successful due to: "+t)})}}}function getCurrentPosition(e){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(t){var o={lat:t.coords.latitude,lng:t.coords.longitude};e(o)},function(){console.log("geolocation error");e(null)});else{console.log("The browser does not support geolocation");e(null)}}function loadMapsScript(){var e=document.createElement("script");$.getJSON("../wp-content/themes/texsite/json/locations.json",function(t){var o=t.locations.map(function(e,t){return e.coordinates});e.onload=function(){var e=GoogleMap();e.addMarkers(e.getGoogleMaps(t).map,t),getCurrentPosition(function(a){e.getDistance(a,o,function(e){var o=e.map(function(e,o){return t.locations[o].distance=e.distance.value,t.locations[o].miles=e.distance.text,t.locations[o]}).sort(function(e,t){return e.distance-t.distance});Location.renderLocations(o,function(){$("[rel*='Menu-']").click(function(e){var t=$(e.target).attr("rel").split("-"),o=t[1],a=t[2],n=t[3];Menu.renderMenu(o,a,n)})}),Location.searchLocations(t.locations,function(){$("[rel*='Menu-']").click(function(e){var t=$(e.target).attr("rel").split("-"),o=t[1],a=t[2],n=t[3];Menu.renderMenu(o,a,n)})})})})},Location.renderLocations(t.locations,function(){$("[rel*='Menu-']").click(function(e){var t=$(e.target).attr("rel").split("-"),o=t[1],a=t[2],n=t[3];Menu.renderMenu(o,a,n)})}),Location.searchLocations(t.locations,function(){$("[rel*='Menu-']").click(function(e){var t=$(e.target).attr("rel").split("-"),o=t[1],a=t[2],n=t[3];Menu.renderMenu(o,a,n)})})}),e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZAdtCTX8ZlyU39tML3S_dOmmWWAh6cdk",document.head.appendChild(e)}var Menu=function(e){return{renderMenu:function(t,o,a){var n="";n+='<div class="modal fade" id="'+o+t+'Modal" role="dialog">',n+='<div class="modal-dialog modal-lg">',n+='<div class="modal-content">',n+='<div class="modal-header">',n+='<button type="button" class="close" data-dismiss="modal">&times;</button>',n+='<p class="modal-title">'+a+" "+t+' Menu<a href="../wp-content/themes/texsite/pdf/'+t+"_"+o+'.pdf" target="_blank"><i class="fa fa-print" aria-hidden="true"></i></a></p>',n+="</div>",n+='<div class="modal-body">',n+='<div class="smaller-screen-locations">',n+='<img src="../wp-content/themes/texsite/images/'+t+"_"+o+'.jpg" alt="'+t+' menu" width="100%">',n+="</div>",n+='<div class="large-screen-locations">',n+='<object rel="pdf-'+t+"-"+o+'" id="'+o+"-"+t+'-pdf" class="pdf-image" type="application/pdf" data="../wp-content/themes/texsite/pdf/'+t+"_"+o+'.pdf" style="width: 100%">',n+="Your browser does not support objects",n+="</object>",n+="</div>",n+="</div>",n+='<div class="modal-footer">',n+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>',n+="</div>",n+="</div>",n+="</div>",n+="</div>",e("#menus").html(n)}}}(jQuery),Location=function(e){function t(e){var t="";return t+="<li>",t+='<div class="row main-location">',t+='<div class="location-info col-lg-6">',t+="<h4>"+e.name+"</h4>",t+="<p>"+e.address+"</p>",t+="<p>"+e.city+", ",t+=e.state+" ",t+=e.zip+"</p>",t+='<a href="tel:'+e.phone+'">T. '+e.phone+"</a>",t+="<p>"+e.hours1+"</p>",t+="<p>"+e.hours2+"</p>",t+="<p>"+e.hours3+"</p>",e.miles?t+="<p>Distance: "+e.miles+"</p>":t+="<p></p>",t+="</div>",t+='<div class="location-buttons col-lg-6">',t+='<div class="row">',t+='<a rel="Menu-House-'+e.label+"-"+e.name+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+e.label+'HouseModal"> Menu</a>',t+='<a rel="Menu-Catering-'+e.label+"-"+e.name+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+e.label+'CateringModal"> Catering Menu</a>',t+="</div>",t+='<div class="row">',t+='<a class="btn btn-danger" href="https://www.google.com/maps/dir/?api=1&destination='+e.coordinates.lat+","+e.coordinates.lng+'" target="_blank" role="button"> Directions</a>',t+="</div>",t+="</div>",t+="</div>",t+="</li>"}return{renderLocations:function(o,a){var n='<ul class="searchresults">';e.each(o,function(e,o){n+=t(o)}),n+="</ul>",e("#update").html(n),a()},searchLocations:function(o,a){e("#search").keyup(function(){var n=e("#search").val(),s=new RegExp(n,"i"),i='<ul class="searchresults">';e.each(o,function(e,o){-1==o.name.search(s)&&-1==o.address.search(s)&&-1==o.zip.search(s)&&-1==o.state.search(s)&&-1==o.city.search(s)||(i+=t(o))}),i+="</ul>",e("#update").html(i),a()})}}}(jQuery);loadMapsScript();