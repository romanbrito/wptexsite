function GoogleMap(){return{getGoogleMaps:function(o){var t=new google.maps.Map(document.getElementById("map")),a=new google.maps.LatLngBounds;return o.map(function(o,e){var n=new google.maps.LatLng(o.coordinates);a.extend(n),t.fitBounds(a),t.panToBounds(a)}),{map:t}},addMarkers:function(o,t){var a=t.map(function(t,a){return new google.maps.Marker({position:t.coordinates,label:t.label,map:o})});t.map(function(o,t){return a[t].addListener("click",function(){window.open("https://www.google.com/maps/dir/?api=1&destination="+o.coordinates.lat+","+o.coordinates.lng,"_blank")})}),$.getScript("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js",function(){new MarkerClusterer(o,a,{gridSize:15,imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})})},getDistance:function(o,t,a){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[o],destinations:t,travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(o,t){"OK"===t?a(o.rows[0].elements):alert("Geocode was not successful due to: "+t)})}}}function getCurrentPosition(o){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};o(a)},function(){console.log("geolocation error");o(null)});else{console.log("The browser does not support geolocation");o(null)}}function loadMapsScript(o){var t=o.map(function(o,t){return o.coordinates});$.getScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyBZAdtCTX8ZlyU39tML3S_dOmmWWAh6cdk",function(){console.log("google maps script loaded");var a=GoogleMap();a.addMarkers(a.getGoogleMaps(o).map,o),getCurrentPosition(function(e){a.getDistance(e,t,function(t){var a=t.map(function(t,a){return o[a].distance=t.distance.value,o[a].miles=t.distance.text,o[a]}).sort(function(o,t){return o.distance-t.distance});Location.renderLocations(a,function(){menuClickEvent(a)}),Location.searchLocations(o,function(){menuClickEvent(o)})})})}),Location.renderLocations(o,function(){menuClickEvent(o)}),Location.searchLocations(o,function(){menuClickEvent(o)})}function menuClickEvent(o){$("[rel*='Menu-']").click(function(t){var a=$(t.target).attr("rel").split("-"),e=a[1],n=a[2],i=a[3],s=a[4],l="House"===e?o[s].houseMenuUrl:o[s].cateringMenuUrl;Menu.renderMenu(e,n,i,l)})}var Menu=function(o){return{renderMenu:function(t,a,e,n){var i="";i+='<div class="modal fade" id="'+a+t+'Modal" role="dialog">',i+='<div class="modal-dialog modal-lg">',i+='<div class="modal-content">',i+='<div class="modal-header">',i+='<button type="button" class="close" data-dismiss="modal">&times;</button>',i+='<p class="modal-title">'+e+" "+t+' Menu<a href="../wp-content/themes/texsite/pdf/'+t+"_"+a+'.pdf" target="_blank"><i class="fa fa-print" aria-hidden="true"></i></a></p>',i+="</div>",i+='<div class="modal-body">',i+='<div class="smaller-screen-locations">',n.map(function(o){return i+='<img src="../wp-content/themes/texsite/images/'+o+'.jpg" alt="'+o+' menu" width="100%"> <p></p>'}),i+="</div>",i+='<div class="large-screen-locations">',i+='<object rel="pdf-'+t+"-"+a+'" id="'+a+"-"+t+'-pdf" class="pdf-image" type="application/pdf" data="../wp-content/themes/texsite/pdf/'+t+"_"+a+'.pdf" style="width: 100%">',i+="Your browser does not support objects",i+="</object>",i+="</div>",i+="</div>",i+='<div class="modal-footer">',i+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>',i+="</div>",i+="</div>",i+="</div>",i+="</div>",o("#menus").html(i)}}}(jQuery),Location=function(o){function t(o,t){var a="";return a+="<li>",a+='<div class="row main-location">',a+='<div class="location-info col-lg-6">',a+="<h4>"+o.name+"</h4>",a+="<p>"+o.address+"</p>",a+="<p>"+o.city+", ",a+=o.state+" ",a+=o.zip+"</p>",a+='<a href="tel:'+o.phone+'">T. '+o.phone+"</a>",a+="<p>"+o.hours1+"</p>",a+="<p>"+o.hours2+"</p>",a+="<p>"+o.hours3+"</p>",o.miles?a+="<p>Distance: "+o.miles+"</p>":a+="<p></p>",a+="</div>",a+='<div class="location-buttons col-lg-6">',a+='<div class="row">',a+='<a rel="Menu-House-'+o.label+"-"+o.name+"-"+t+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+o.label+'HouseModal"> Menu</a>',a+='<a rel="Menu-Catering-'+o.label+"-"+o.name+"-"+t+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+o.label+'CateringModal"> Catering Menu</a>',a+="</div>",a+='<div class="row">',a+='<a class="btn btn-danger" href="https://www.google.com/maps/dir/?api=1&destination='+o.coordinates.lat+","+o.coordinates.lng+'" target="_blank" role="button"> Directions</a>',a+="</div>",a+="</div>",a+="</div>",a+="</li>"}return{renderLocations:function(a,e){var n='<ul class="searchresults">';o.each(a,function(o,a){n+=t(a,o)}),n+="</ul>",o("#update").html(n),e()},searchLocations:function(a,e){o("#search").keyup(function(){var n=o("#search").val(),i=new RegExp(n,"i"),s='<ul class="searchresults">';o.each(a,function(o,a){-1==a.name.search(i)&&-1==a.address.search(i)&&-1==a.zip.search(i)&&-1==a.state.search(i)&&-1==a.city.search(i)||(s+=t(a,o))}),s+="</ul>",o("#update").html(s),e()})}}}(jQuery),GETinfo=window.location.href.split("/");$.getJSON("../wp-content/themes/texsite/json/locations.json",function(o){"locations-menu"===GETinfo[3]?loadMapsScript(o.locations):"great-hills"===GETinfo[3]?loadMapsScript([o.locations[0]]):"lakeline"===GETinfo[3]?loadMapsScript([o.locations[1]]):"sunset"===GETinfo[3]?loadMapsScript([o.locations[2]]):"frisco-warren-pkwy"===GETinfo[3]?loadMapsScript([o.locations[3]]):"las-colinas"===GETinfo[3]?loadMapsScript([o.locations[4]]):"old-town"===GETinfo[3]?loadMapsScript([o.locations[5]]):"plano"===GETinfo[3]?loadMapsScript([o.locations[6]]):"richardson"===GETinfo[3]?loadMapsScript([o.locations[7]]):"arlington-uta-campus"===GETinfo[3]?loadMapsScript([o.locations[8]]):"okc"===GETinfo[3]?loadMapsScript([o.locations[9]]):"laredo"===GETinfo[3]?loadMapsScript([o.locations[10]]):"mcallen"===GETinfo[3]?loadMapsScript([o.locations[11]]):"houston-westheimer"===GETinfo[3]&&loadMapsScript([o.locations[12]])});