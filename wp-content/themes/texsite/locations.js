function GoogleMap(){return{getGoogleMaps:function(t){var e=new google.maps.Map(document.getElementById("map")),o=new google.maps.LatLngBounds;return t.locations.map(function(t,a){var n=new google.maps.LatLng(t.coordinates);o.extend(n),e.fitBounds(o),e.panToBounds(o)}),{map:e}},addMarkers:function(t,e){var o=e.locations.map(function(e,o){return new google.maps.Marker({position:e.coordinates,label:e.label,map:t})});e.locations.map(function(t,e){return o[e].addListener("click",function(){window.open("https://www.google.com/maps/dir/?api=1&destination="+t.coordinates.lat+","+t.coordinates.lng,"_blank")})}),$.getScript("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js",function(){new MarkerClusterer(t,o,{gridSize:15,imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})})},getDistance:function(t,e,o){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[t],destinations:e,travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(t,e){"OK"===e?o(t.rows[0].elements):alert("Geocode was not successful due to: "+e)})}}}function getCurrentPosition(t){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};t(o)},function(){console.log("geolocation error");t(null)});else{console.log("The browser does not support geolocation");t(null)}}function loadMapsScript(t){var e=t.locations.map(function(t,e){return t.coordinates});$.getScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyBZAdtCTX8ZlyU39tML3S_dOmmWWAh6cdk",function(){console.log("google maps script loaded");var o=GoogleMap();o.addMarkers(o.getGoogleMaps(t).map,t),getCurrentPosition(function(a){o.getDistance(a,e,function(e){var o=e.map(function(e,o){return t.locations[o].distance=e.distance.value,t.locations[o].miles=e.distance.text,t.locations[o]}).sort(function(t,e){return t.distance-e.distance});Location.renderLocations(o,function(){$("[rel*='Menu-']").click(function(t){var e=$(t.target).attr("rel").split("-"),o=e[1],a=e[2],n=e[3];Menu.renderMenu(o,a,n)})}),Location.searchLocations(t.locations,function(){$("[rel*='Menu-']").click(function(t){var e=$(t.target).attr("rel").split("-"),o=e[1],a=e[2],n=e[3];Menu.renderMenu(o,a,n)})})})})}),Location.renderLocations(t.locations,function(){$("[rel*='Menu-']").click(function(t){var e=$(t.target).attr("rel").split("-"),o=e[1],a=e[2],n=e[3];Menu.renderMenu(o,a,n)})}),Location.searchLocations(t.locations,function(){$("[rel*='Menu-']").click(function(t){var e=$(t.target).attr("rel").split("-"),o=e[1],a=e[2],n=e[3];Menu.renderMenu(o,a,n)})})}var Menu=function(t){return{renderMenu:function(e,o,a){var n="";n+='<div class="modal fade" id="'+o+e+'Modal" role="dialog">',n+='<div class="modal-dialog modal-lg">',n+='<div class="modal-content">',n+='<div class="modal-header">',n+='<button type="button" class="close" data-dismiss="modal">&times;</button>',n+='<p class="modal-title">'+a+" "+e+' Menu<a href="../wp-content/themes/texsite/pdf/'+e+"_"+o+'.pdf" target="_blank"><i class="fa fa-print" aria-hidden="true"></i></a></p>',n+="</div>",n+='<div class="modal-body">',n+='<div class="smaller-screen-locations">',n+='<img src="../wp-content/themes/texsite/images/'+e+"_"+o+'.jpg" alt="'+e+' menu" width="100%">',n+="</div>",n+='<div class="large-screen-locations">',n+='<object rel="pdf-'+e+"-"+o+'" id="'+o+"-"+e+'-pdf" class="pdf-image" type="application/pdf" data="../wp-content/themes/texsite/pdf/'+e+"_"+o+'.pdf" style="width: 100%">',n+="Your browser does not support objects",n+="</object>",n+="</div>",n+="</div>",n+='<div class="modal-footer">',n+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>',n+="</div>",n+="</div>",n+="</div>",n+="</div>",t("#menus").html(n)}}}(jQuery),Location=function(t){function e(t){var e="";return e+="<li>",e+='<div class="row main-location">',e+='<div class="location-info col-lg-6">',e+="<h4>"+t.name+"</h4>",e+="<p>"+t.address+"</p>",e+="<p>"+t.city+", ",e+=t.state+" ",e+=t.zip+"</p>",e+='<a href="tel:'+t.phone+'">T. '+t.phone+"</a>",e+="<p>"+t.hours1+"</p>",e+="<p>"+t.hours2+"</p>",e+="<p>"+t.hours3+"</p>",t.miles?e+="<p>Distance: "+t.miles+"</p>":e+="<p></p>",e+="</div>",e+='<div class="location-buttons col-lg-6">',e+='<div class="row">',e+='<a rel="Menu-House-'+t.label+"-"+t.name+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+t.label+'HouseModal"> Menu</a>',e+='<a rel="Menu-Catering-'+t.label+"-"+t.name+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+t.label+'CateringModal"> Catering Menu</a>',e+="</div>",e+='<div class="row">',e+='<a class="btn btn-danger" href="https://www.google.com/maps/dir/?api=1&destination='+t.coordinates.lat+","+t.coordinates.lng+'" target="_blank" role="button"> Directions</a>',e+="</div>",e+="</div>",e+="</div>",e+="</li>"}return{renderLocations:function(o,a){var n='<ul class="searchresults">';t.each(o,function(t,o){n+=e(o)}),n+="</ul>",t("#update").html(n),a()},searchLocations:function(o,a){t("#search").keyup(function(){var n=t("#search").val(),s=new RegExp(n,"i"),i='<ul class="searchresults">';t.each(o,function(t,o){-1==o.name.search(s)&&-1==o.address.search(s)&&-1==o.zip.search(s)&&-1==o.state.search(s)&&-1==o.city.search(s)||(i+=e(o))}),i+="</ul>",t("#update").html(i),a()})}}}(jQuery);$.getJSON("../wp-content/themes/texsite/json/locations.json",function(t){loadMapsScript(t)});